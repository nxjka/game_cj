* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

:root{
    --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #e6eefc 100%);
    --primary-1: #6a11cb;
    --primary-2: #2575fc;
    --accent: #4d7cfe;
    --muted: #666;
    --panel-bg: #fbfdff;
    --card-radius: 12px;
    --shadow-1: 0 8px 24px rgba(37,117,252,0.08);
}

body{
    background: var(--bg-gradient);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px;
    -webkit-font-smoothing:antialiased;
}

.container{
    max-width: 1180px;
    width: 100%;
    background: white;
    border-radius: 14px;
    box-shadow: var(--shadow-1);
    overflow: hidden;
    display:flex;
    flex-direction:column;
}

header{
    background: linear-gradient(90deg, var(--primary-1) 0%, var(--primary-2) 100%);
    color: white;
    padding: 18px 22px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
}

.header-left{ display:flex; flex-direction:column }
.header-right{ margin-left:auto; display:flex; align-items:center; gap:8px }

.row{ display:flex; gap:8px; align-items:center }
.mt-8{ margin-top:8px }
.wide-input{ width:100%; padding:6px 8px; border-radius:6px; border:1px solid #e6eefc }
.range-flex{ flex:1 }
.inline-btn{ padding:6px 8px; min-width:64px }
.action-row{ display:flex; gap:8px }
.action-row{ margin-bottom:6px }
.muted{ color:var(--muted); font-size:0.9rem }
.pan-row{ display:flex; gap:5px }

header h1{
    font-size:1.6rem;
    letter-spacing:0.6px;
}

.subtitle{
    font-size:0.95rem;
    opacity:0.95;
}

.app-body{
    display:grid;
    grid-template-columns: 320px 1fr;
    gap:20px;
    padding:18px;
}
/* 让主区域随容器拉伸，避免画布被压缩到下面 */
.app-body{ flex:1 }

.toolbar{
    background: var(--panel-bg);
    padding:14px;
    border-radius: var(--card-radius);
    min-height:420px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.03);
    overflow:auto;
}

/* 全屏时工具栏浮动且可折叠 */
.container.fullscreen-active .toolbar{
    position: absolute;
    left: 16px;
    top: 72px;
    width: 320px;
    max-height: calc(100vh - 96px);
    z-index: 1200;
    box-shadow: 0 24px 48px rgba(16,24,40,0.18);
    transition: transform .28s ease, opacity .2s ease;
    background: rgba(255,255,255,0.98);
}
.container.fullscreen-active .toolbar.collapsed{
    transform: translateX(-360px);
    opacity: 0.98;
}

/* 当不在全屏时恢复正常流布局 */
.toolbar.collapsed{ transform: none }

.tool-section{ margin-bottom:18px }
.tool-section h3{
    margin-bottom:12px;
    color:#222;
    font-size:1rem;
    padding-bottom:8px;
    border-bottom:1px dashed #eef3ff;
}

.tools{ display:flex; flex-wrap:wrap; gap:10px }
.tool-btn{
    width:44px;height:44px;border-radius:10px;border:1px solid #eef3ff;background:white;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px rgba(16,24,40,0.04);transition:transform .14s ease, box-shadow .14s ease;
}
.tool-btn:hover{ transform: translateY(-4px); box-shadow: 0 6px 18px rgba(16,24,40,0.06); }
.tool-btn.active{ background: var(--accent); color:#fff; border-color:transparent }

.color-palette{ display:flex; flex-wrap:wrap; gap:8px }
.color-option{ width:30px;height:30px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:transform .12s ease }
.color-option:hover{ transform: scale(1.08) }
.color-option.active{ border-color:#333 }

.slider-container label{ display:block;margin-bottom:8px;color:#444;font-size:0.95rem }
input[type="range"]{ width:100% }
select, input[type="text"], input[type="color"]{ width:100%; padding:8px;border-radius:8px;border:1px solid #e6eefc;background:white }

.canvas-container{
    background: linear-gradient(180deg,#f8fbff 0%, #fff 100%);
    border-radius: 12px;
    min-height:480px;
    position:relative;
    overflow:hidden;
    display:flex;align-items:stretch;justify-content:center;padding:12px;
}

canvas{ background: #ffffff; border-radius:8px; width:100%; height:100%; display:block; box-shadow: 0 8px 20px rgba(16,24,40,0.04); cursor:crosshair }

.text-input-container{ position:absolute; display:none; border-radius:8px; border:1px dashed var(--accent); padding:6px; background:rgba(255,255,255,0.96); box-shadow:0 8px 30px rgba(16,24,40,0.06) }
.text-input{ width:100%; height:100%; border:none; outline:none; resize:none; font-family:inherit }

.zoom-controls, .pan-controls{ position:absolute; display:flex; gap:8px; padding:8px; background:rgba(255,255,255,0.85); border-radius:10px; box-shadow:0 6px 18px rgba(16,24,40,0.06) }
.zoom-controls{ right:14px; bottom:14px; align-items:center }
.pan-controls{ left:14px; bottom:14px; flex-direction:column }
.zoom-btn, .pan-btn{ width:36px;height:36px;border-radius:50%;border:none;background:var(--accent); color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center }
.zoom-level{ padding:0 8px; font-weight:700; color:#222 }

.actions{ display:flex; gap:12px; justify-content:center; padding:18px; border-top:1px solid #f3f6fb; background:transparent }
.action-btn{ padding:10px 16px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--primary-1),var(--primary-2)); color:#fff; font-weight:600; cursor:pointer; box-shadow:0 8px 24px rgba(37,117,252,0.12) }
.action-btn.clear{ background:linear-gradient(90deg,#ff416c,#ff4b2b) }
.action-btn:disabled{ opacity:0.5; cursor:not-allowed }

.layers-list, #layersList{ max-height:170px; overflow:auto; background:#fff; border-radius:8px; padding:6px; border:1px solid #f3f6fb }
.history-list, #historyList{ max-height:200px; overflow:auto }

.shortcuts{ color:var(--muted); font-size:0.9rem }
footer{ text-align:center; color:var(--muted); padding:12px; font-size:0.9rem }

/* responsive */
@media (max-width:980px){
    .app-body{ grid-template-columns: 1fr; }
    .toolbar{ order:2 }
    .canvas-container{ order:1; min-height:380px }
    header{ flex-direction:column; gap:8px; align-items:flex-start }
}

@media (max-width:480px){
    header h1{ font-size:1.2rem }
    .tool-btn{ width:40px;height:40px }
    .canvas-container{ padding:8px }
}
